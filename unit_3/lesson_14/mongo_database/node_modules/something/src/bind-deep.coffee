CALLBACK_KEY = require('./callback-key')

module.exports = bindDeep = (keys, callback, obj = {}) ->
  prop = keys[0]

  if keys.length > 1
    obj[prop] = bindDeep(keys[1..], callback, obj[prop])
  else
    obj[prop] ||= {}
    obj[prop][CALLBACK_KEY] ||= []
    obj[prop][CALLBACK_KEY].push(callback)

  obj
